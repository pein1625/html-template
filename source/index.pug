extends layout/page

block content
  .svg-container
    svg.n-svg.js-svg(viewBox="0 0 1921 1081", xmlns="http://www.w3.org/2000/svg", xmlns:xlink="http://www.w3.org/1999/xlink")
      defs
        filter#f1(x="0", y="0")
          fegaussianblur(in="SourceGraphic", stdDeviation="2", result="blur")
      g#zoom-scene
        image(href="https://html.zend.website/svg-map/images/phu-quoc-map.png", width="1921", height="1081")
        circle(data-object="130f0eg299", cx="1068.174072265625", cy="498.8444519042969", r="5", fill="transparent")
        g.svg-icon(data-width="38", data-height="38", data-x="1049.174072265625", data-y="479.8444519042969", data-duration="0", data-delay="1000", transform="matrix(1.0373705000000046 0 0 1.0373705000000046 -39.91819916760749 -18.64206658989184)")
          image(href="https://html.zend.website/svg-map/images/icon-star.png", width="38", height="38", x="1049.174072265625", y="479.8444519042969")
        circle(data-object="1gbfa8d8se", cx="888.1195678710938", cy="568.0402221679688", r="5", fill="transparent")
        g.svg-icon(data-width="58", data-height="51", data-x="859.1195678710938", data-y="542.5402221679688", data-duration="0", data-delay="0", transform="matrix(1.0373705000000046 0 0 1.0373705000000046 -33.18947231113083 -21.227947122530708)")
          image(href="https://html.zend.website/svg-map/images/icon-airplane.png", width="58", height="51", x="859.1195678710938", y="542.5402221679688")
        circle(data-object="ch0e1g3sj0", cx="775.3367919921875", cy="540.4092407226562", r="5", fill="transparent")
        g.svg-icon(data-width="58", data-height="49", data-x="746.3367919921875", data-y="515.9092407226562", data-duration="0", data-delay="1000", transform="matrix(1.0373705000000046 0 0 1.0373705000000046 -28.974723585147636 -20.19536353042853)")
          image(href="https://html.zend.website/svg-map/images/icon-land.png", width="58", height="49", x="746.3367919921875", y="515.9092407226562")
        circle(data-object="c3befbcd4p", cx="651.55078125", cy="720.7096557617188", r="5", fill="transparent")
        g.svg-icon(data-width="58", data-height="55", data-x="622.55078125", data-y="693.2096557617188", data-duration="0", data-delay="0", transform="matrix(1.0373705000000046 0 0 1.0373705000000046 -24.348778470706144 -26.933280190646652)")
          image(href="https://html.zend.website/svg-map/images/icon-umbrella.png", width="58", height="55", x="622.55078125", y="693.2096557617188")
        circle(data-object="dgaff2splh", cx="1181.079833984375", cy="365.8564147949219", r="5", fill="transparent")
        g.svg-icon(data-width="58", data-height="55", data-x="1152.079833984375", data-y="338.3564147949219", data-duration="0", data-delay="1000", transform="matrix(1.0373705000000046 0 0 1.0373705000000046 -44.137543935918565 -13.672237149095324)")
          image(href="https://html.zend.website/svg-map/images/icon-umbrella.png", width="58", height="55", x="1152.079833984375", y="338.3564147949219")
        circle(data-object="ch0e2mobda", cx="1439.655029296875", cy="286.0832214355469", r="5", fill="transparent")
        g.svg-icon(data-width="115", data-height="81", data-x="1382.155029296875", data-y="245.58322143554688", data-duration="0", data-delay="0", transform="matrix(1.0373705000000046 0 0 1.0373705000000046 -53.80062827234554 -10.691073026658431)")
          image(href="https://html.zend.website/svg-map/images/icon-animals.png", width="115", height="81", x="1382.155029296875", y="245.58322143554688")
        circle(data-object="c30ffs973b", cx="1384.6390380859375", cy="643.687255859375", r="5", fill="transparent")
        g.svg-icon(data-width="96", data-height="60", data-x="1336.6390380859375", data-y="613.687255859375", data-duration="0", data-delay="1000", transform="matrix(1.0373705000000046 0 0 1.0373705000000046 -51.744653172796944 -24.054914595095756)")
          image(href="https://html.zend.website/svg-map/images/icon-tree.png", width="96", height="60", x="1336.6390380859375", y="613.687255859375")
    style.
      .n-svg
      {
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
      }

      .svg-path-color
      {
      opacity: 0;
      transition: 0.6s ease;
      filter: url(#f1);
      animation-delay: .3s;
      }

      .svg-thumbnail
      {
      opacity: 0;
      transform: translateY(10%);
      transition: 0.6s ease;
      }

      .svg-path a
      {
      pointer-events: none;
      }

      .svg-path.active .svg-path-color
      {
      opacity: 1;
      }

      .svg-path.active .svg-thumbnail
      {
      opacity: 1;
      transform: translateY(0);
      }

      .svg-path.active a
      {
      pointer-events: unset;
      }

      @media (min-width: 992px)
      {
      .svg-path:hover .svg-path-color
      {
      opacity: 1;
      }

      .svg-path:hover .svg-thumbnail
      {
      opacity: 1;
      transform: translateY(0);
      }

      .svg-path:hover a
      {
      pointer-events: unset;
      }
      }
    script.
      document.addEventListener('DOMContentLoaded', function()
      {
      console.log('dom content loaded', $('.js-svg'));
      $('.js-svg').on('click', function()
      {
      $('.svg-path.active').removeClass('active');
      });
      $('.js-svg').on('click', '.svg-path', function(e)
      {
      e.stopPropagation();
      $('.svg-path').not($(this)).removeClass('active');
      $(this).addClass('active');
      });
      // 0 - 1000
      // 0.5 - 1.5
      // 0.5 + 1 * timestamp / 2000
      window.requestAnimationFrame(step);

      function step(timestamp)
      {
      $('.js-svg').find('.svg-icon').each(function()
      {
      const $group = $(this);
      const duration = parseInt($group.data('duration') || 2000);
      const delay = parseInt($group.data('duration') || 0);
      let x = $group.data('x');
      let y = $group.data('y');
      let width = $group.data('width');
      let height = $group.data('height');
      let time = (timestamp - delay) % (2 * duration);
      let scale = 0.5 + Math.abs(1 * (time - duration) / duration);
      let newWidth = (1 - scale) * x + (1 - scale) * width / 2;
      let newHeight = (1 - scale) * y + (1 - scale) * height / 2;
      let matrix = `matrix(${scale} 0 0 ${scale} ${newWidth} ${newHeight})`;
      $group.attr('transform', matrix);
      });
      window.requestAnimationFrame(step);
      }
      });
